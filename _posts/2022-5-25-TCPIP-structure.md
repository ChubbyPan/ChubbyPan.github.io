# TCP/IP 模型
## 几层? 起到什么作用? 分别有什么协议?
- 应用层
  - 为用于提供服务的.
  - HTTP(网页服务)/FTP(文件服务)/Telnet/DNS..
- 传输层
  - 提供进程间的通信,端到端,使用不同的port来区分,将数据包传送给上层的哪个应用(传进和传出)
  - TCP/UDP 
    - 区别? 
      - 可靠传输和不可靠传输; 可靠传输提供超时重传,拥塞控制等功能,目的port的数据包按照一定的顺序; 不可靠传输只负责传递数据,不保证数据是否可以到达
    - format
      - 在应用层数据前加上头部(可以是TCP头部,也可以是UDP头部,主要包括目的port, 原port; 如果是TCP, 还有数据包之间的顺序编号
    - 常见port
      - 80: web server默认port
      - 22: 远程登陆server默认port
  
- 网络层
  - 选择合适的网路对数据进行传送, 主机到主机之间的通信,使用IP来区分
  - IP
    - 使用IP来给设备编号(网络号+主机号), 为路由提供服务
    - format? IP为TCP服务, 会在TCP头部之前加上IP头部,包括目的IP和源IP的信息
- 网络链路层
  - 网络层提供链路传输的服务,负责在以太网、WiFi 这样的底层网络上发送原始数据包()


## 从键入网址到显示网页中间发生了什么?
从TCP/IP模型从上往下讲

1. **键入URL之后,首先对URL进行解析**
2. **通过DNS,找到域名对应的IP**
  (DNS怎么工作呢?)
  <!-- 操作系统在发送协议包之前先要获取服务器的IP地址。如果在本地的浏览器缓存、操作系统缓存或者hosts文件中存在对应的IP地址，就不需要再访问本地的DNS服务器了。如果不存在，访问本地的DNS服务器，由本地DNS服务器对进行递归访问，即按照层级向下访问，最后得到IP地址。 -->
3. **生成http请求.**
   (http request格式? http response格式? method有哪些? GET和POST有什么区别? 常见的response状态码有哪些? 分别是什么意思?)
4. 经过TCP/IP协议栈,先**进行TCP三次握手**,连接(三次握手过程? 四次挥手过程?)
5. 握手之后，把**请求层层封装**，通过**网卡将数据发送到交换机**。交换机会进行校验以及查找交换表转发，到达路由器。**路由器把MAC层扒皮，查看目的ip，然后根据路由表选择下一跳，再进行MAC层封装。重复这个过程，最后到达服务器**。


## linux怎么收发网络包的?

1. 从接收到网络包开始, 中断+轮询的方式对网络包进行处理
2. 接收: 从下到上 
   - 网络接口层: 检查是否合法->传给网络层, 剥掉帧头
   - 网络层: 检查IP地址是否是本机地址,检查上层协议是TCP还是UDP, 剥掉IP头
   - 传输层: 找到应用数据对应的port, 剥掉TCP头,将应用数据传送给对应的socket,拷贝到socket层的接收缓冲区域
   - 应用层: 从内核的socket接收缓冲区读取接收到的数据
3. 发送: 从上到下 步骤相反